# `zsh`

## Startup Source Order

How to maintain good startup scripts. Also known as rc files.

:::info

TL;DR:

- You don't need `/etc/zshenv`, `~/.zprofile`, `~/.zlogin`, and `~/.zlogout`.
- You only need:
  - `~/.zshenv`: For environment variables.
  - `~/.zshrc`: For aliases, functions, and auto-completion.
- Call `compinit` ASAP in `~/.zshrc`
  - If you use zsh frameworks (e.g. Oh My Zsh), they might have done this for you.
    - That means you should source them ASAP
- `compinit` is not the same as `bashcompinit`
  - Zsh is highly compatible with Bash completion scripts.
  - If you only have Bash completion scripts, you can use `bashcompinit` instead.
  - Call `bashcompinit` it right after `compinit`.
  - They are independent of each other and can be used together.

:::

Depending on how zsh is invoked, it reads different files. Here is the order:

1. `/etc/zshenv`
2. `~/.zshenv`
3. `/etc/paths` (only for macOS)
4. `~/.zprofile` (only for login shells)
5. `/etc/zshrc` (only for macOS)
6. `~/.zshrc` (only for interactive shells)
7. `~/.zlogin` (only for login shells)
8. _Your shell session_
9. `~/.zlogout` (only for login shells)

:::note

Different systems (even installations) may behave differently. Use `zsh -x` to findout what happens on shell startup.

:::

## Third party configuration guide

When a CLI tool is installed, they may require some configuration on RC files. For the following reasons:

| Type                                 | Where to put                          |
| ------------------------------------ | ------------------------------------- |
| Environment Variables (beside Paths) | `~/.zshenv`                           |
| Paths                                | `~/.zshrc`                            |
| Aliases                              | `~/.zshrc`                            |
| Functions                            | `~/.zshrc`                            |
| Auto-completion                      | `~/.zshrc` (After calling `compinit`) |

## Library

Contains few useful snippets and configs. Independent from each other, mix-and-match as needed.

- [Oh My Zsh](https://github.com/ohmyzsh/ohmyzsh)
- [Prezto](https://github.com/sorin-ionescu/prezto)

## Frameworks

Manging your configuration files and plugins.

- [Antigen](https://github.com/zsh-users/antigen): Dead
  - [zgen](https://github.com/tarjoilija/zgen): Inspired by Antigen, also dead
  - [zplug](https://github.com/zplug/zplug): Slightly improved version of Antigen, almost dead
  - [antidote](https://github.com/mattmc3/antidote)
- [Zinit](https://github.com/zdharma-continuum/zinit): Very fast, but less maintained, some bugs are left unfixed for a while
- [Zim](https://github.com/zimfw/zimfw)
- [zcomet](https://github.com/agkozak/zcomet)
- [Sheldon](https://github.com/rossmacarthur/sheldon)
- [Znap](https://github.com/marlonrichert/zsh-snap)

## Prompts

CLI that create dynamic, highly customizable prompts.

- [Powerlevl10k](https://github.com/romkatv/powerlevel10k)
- [Powerlevl9k](https://github.com/Powerlevel9k/powerlevel9k): Dead
- [Starship](https://github.com/starship/starship)
- [Pure](https://github.com/sindresorhus/pure)
- [Oh My Posh](https://github.com/jandedobbeleer/oh-my-posh)

## References

- [flowblokâ€™s blog - Shell startup scripts](https://blog.flowblok.id.au/2013-02/shell-startup-scripts.html)
- [mac.install.guide - .zshrc and .zprofile](https://mac.install.guide/terminal/zshrc-zprofile)
- [A Guide to the Zsh Completion with Examples](https://thevaluable.dev/zsh-completion-guide-examples/)
- [Welcome To Golang By Example - Understand /etc/paths file and /etc/paths.d directory on MAC](https://golangbyexample.com/understand-etc-paths-pathsd-mac/)
