import { Icon } from "@iconify/react";
import SortableTable from "@site/src/components/SortableTable";
import countries from "@site/src/data/countries.json";
import transitSystem from "@site/src/data/transit-systems.json";

# 💳 Transit System

A list of transit systems and passes around the world.

<SortableTable
  columns={[
    {
      header: "City",
      accessorKey: "city",
      accessorFn: (row) => [row.country, row.city],
      cell: ({ getValue }) => {
        const [country, city] = getValue();
        return `${countries[country.toUpperCase()].emoji} ${city}`;
      },
    },
    {
      header: "Transit System",
      accessorKey: "transit-system",
      cell: ({ getValue }) => {
        const { name, url } = getValue();
        return (
          <a href={url} target="blank" rel="noreferrer noopener">
            {name}
          </a>
        );
      },
    },
    {
      header: "Pass",
      accessorKey: "passes",
      cell: ({ getValue }) => {
        const passes = getValue();
        const links = passes.map((pass, index) => {
          return (
            <>
              <a
                key={index}
                href={pass.url}
                target="blank"
                rel="noreferrer noopener"
              >
                {pass.name}
              </a>
              {pass["apple-pay"] && (
                <>
                  {" "}
                  <Icon icon="logos:apple-pay" inline={true} />
                </>
              )}
            </>
          );
        });
        return links.reduce((acc, current, index) => {
          if (index < links.length - 1) {
            return [...acc, current, <br />];
          }
          return [...acc, current];
        }, []);
      },
    },
    {
      header: "Contactless",
      accessorKey: "contactless",
      cell: ({ getValue }) => (getValue() ? "✅" : "❌"),
    },
  ]}
  data={Object.values(transitSystem)}
/>

## References

- [Apple Support - Where you can ride transit using Apple Pay](https://support.apple.com/en-us/118625)
